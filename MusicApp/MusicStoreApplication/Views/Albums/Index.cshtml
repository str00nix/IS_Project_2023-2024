@model IEnumerable<MusicStoreApplication.Domain.Domain.Album>

@{
    ViewData["Title"] = "Index";
}

<h1 class="text-decoration-underline">Albums</h1>


<div class="container mt-5">
        <div class="row">
            @foreach (var album in Model)
            {
                <div class="col-md-4 mb-4">
                    <div class="card">
                    <img src="~/images/record-clipart.png" class="card-img-top p-2" /> 
						<div class="p-2 card-title d-flex justify-content-between align-items-end">
                            <h5 class="card-title">@album.Name</h5>
							<div class="dropdown">
								<button class="btn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
									<svg width="12" height="14" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
										<path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
									</svg>
								</button>
								<ul class="dropdown-menu">
									<li><a class="dropdown-item" asp-action="Details" asp-route-id="@album.Id">Details</a></li>
									<li><hr class="dropdown-divider border-top border-secondary"></li>
									<li><a class="dropdown-item text-warning" asp-action="Edit" asp-route-id="@album.Id">Edit</a></li>
									<li><a class="dropdown-item text-danger" asp-action="Delete" asp-route-id="@album.Id">Delete</a></li>
								</ul>
							</div>
						</div>                
                        <div class="card-subtitle p-2 d-flex">
                            <h6 class="text-muted me-1">
								@{int index = 1;}
								@{int length = album.Tracks.SelectMany(t => t.Artists).ToHashSet().Count();}
								@foreach (var artist in album.Tracks.SelectMany(t => t.Artists.Select(at => at.Artist)).ToHashSet())
								{
								 <span>@artist.Name</span>
								@if (index != length)
								{
								 <span>,&nbsp</span>
								}
								index++;
							}
							</h6>
							<div class="vr"></div>
                            <h6 class="text-muted ms-1">
								@foreach (var genre in album.Tracks.Select(t => t.Genre))
								{
								 <span>@genre</span>
								}
							</h6>
						</div>
                    </div>
                </div>
            }
			<div class="col-md-4 mb-4 d-flex align-items-stretch">
				<div class="d-flex align-items-center justify-content-center container">
					<div class="p-4 d-flex justify-content-center align-items-end">
						<a asp-action="Create">
						<button type="button" class="btn btn-success ps-5 pe-5 pt-5 pb-5 rounded-circle btn-lg d-flex align-items-center">
							<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
								<path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
							</svg>
						</button>
						</a>
					</div>
				</div>
			</div>
        </div>
    </div>
